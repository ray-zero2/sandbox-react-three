(this["webpackJsonpreact-threejs-test"]=this["webpackJsonpreact-threejs-test"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var i=n(3),r=n(9),s=n.n(r),c=(n(14),n(6)),o=(n(15),n(0)),a=n(1),d=n(5),h=["x","y","z"],u=function(){function e(t){Object(o.a)(this,e),this.resolution=void 0,this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.mesh=void 0,this.directionNumber=void 0,this.rotateDirection=void 0,console.log("THREE JS CREATE!"),this.resolution={width:window.innerWidth,height:window.innerHeight},this.renderer=new d.g({canvas:t,antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.resolution.width,this.resolution.height),this.scene=new d.e,this.camera=new d.d(45,this.resolution.width/this.resolution.height,1,1e4),this.camera.position.set(0,0,1e3),this.camera.lookAt(0,0,0),this.mesh=new d.b(new d.a(400,400,400),new d.c),this.scene.add(this.mesh),this.directionNumber=1,this.rotateDirection=h[this.directionNumber],this.bind()}return Object(a.a)(e,[{key:"render",value:function(){this.mesh.rotation[this.rotateDirection]+=.01,this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render.bind(this))}},{key:"cameraUp",value:function(){this.camera.position.add(new d.f(0,100,0)),this.camera.lookAt(0,0,0)}},{key:"cameraDown",value:function(){this.camera.position.add(new d.f(0,-100,0)),this.camera.lookAt(0,0,0)}},{key:"changeRotateDirection",value:function(){this.directionNumber=(this.directionNumber+1)%3,this.rotateDirection=h[this.directionNumber]}},{key:"log",value:function(e){console.log(e)}},{key:"bind",value:function(){var e=this;window.addEventListener("resize",(function(){var t,n=window.innerWidth,i=window.innerHeight;e.resolution={width:n,height:i},null===(t=e.renderer)||void 0===t||t.setSize(n,i),e.camera.aspect=n/i,e.camera.updateProjectionMatrix()}))}}]),e}(),l=(n(17),n(2)),m=Object(i.forwardRef)((function(e,t){console.log("rendering: Canvas Component");var n=Object(i.useRef)(!1),r=Object(i.useRef)(null),s=Object(i.useRef)(null);return Object(i.useLayoutEffect)((function(){console.log("useLayoutEffect"),n.current&&console.warn("danger!"),n.current=!0,s.current=new u(r.current),s.current.render()}),[]),Object(i.useImperativeHandle)(t,(function(){return{cameraUp:function(){var e;null===(e=s.current)||void 0===e||e.cameraUp()},cameraDown:function(){var e;null===(e=s.current)||void 0===e||e.cameraDown()}}}),[]),Object(l.jsx)("canvas",{ref:r,id:"canvas",className:"canvas"})})),j=Object(i.memo)(m),w=(n(19),[{title:"u",description:"camera up"},{title:"d",description:"camera down"}]),b=function(e){return Object(l.jsxs)("section",{className:"wrapper",children:[Object(l.jsx)("h1",{className:"title",children:"React & Three.js Test"}),Object(l.jsxs)("section",{className:"contents",children:[Object(l.jsx)("h2",{className:"howto-title",children:"How To Use"}),Object(l.jsx)("ul",{className:"howto-list",children:w.map((function(e){return Object(l.jsx)("li",{className:"howto-item",children:Object(l.jsxs)("dl",{className:"description",children:[Object(l.jsxs)("dt",{className:"description-title",children:['keydown "',e.title,'"']}),Object(l.jsx)("dd",{className:"description-content",children:e.description})]})},e.title)}))})]}),Object(l.jsxs)("p",{className:"key-name",children:['keydown: "',e.pressed,'"']})]})},f=Object(i.memo)(b);var v=function(){var e=Object(i.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(i.useRef)(null),o=Object(i.useCallback)((function(e){var t,n,i=e.key;switch(console.log("press: ".concat(i)),r(i),i){case"d":null===(t=s.current)||void 0===t||t.cameraDown();break;case"u":null===(n=s.current)||void 0===n||n.cameraUp()}}),[]);return Object(i.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}),[o]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(j,{ref:s}),Object(l.jsx)(f,{pressed:n})]})};s.a.render(Object(l.jsx)(i.StrictMode,{children:Object(l.jsx)(v,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.2121e411.chunk.js.map